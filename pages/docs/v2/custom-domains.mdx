import Doc from '~/components/layout/docs'
import Snippet from '~/components/snippet'
import Caption from '~/components/text/caption'
import Note from '~/components/text/note'
import Card from '~/components/card'
import { Image } from '~/components/media'

export const meta = {
  title: 'Custom Domains',
  description: 'How to add and use a custom domain with your project.',
  editUrl: 'pages/docs/v2/custom-domains.mdx',
  lastEdited: '2019-09-13T14:53:08.000Z'
}

By default, all deployments are assigned a `.now.sh` prefixed domain.

This domain can be replaced with a **Custom Domain** of your choice. This Custom Domain can be purchased with ZEIT or a third-party.

In this document, adding a domain to your ZEIT Now projects is explained in detail.

## Adding a Domain

If you don't own a domain yet, you can [purchase it with ZEIT](https://zeit.co/domains). Then, once you own a domain, adding it to a project is very straightforward:

### Step 1: Selecting Your Project

On the [dashboard](https://zeit.co/dashboard), pick the project to which you would like to assign your domain:

<Image
  src={`${process.env.ASSETS}/docs/custom-domains/select-project.png`}
  width={1080 / 2}
  height={320 / 2}
  shadow
/>
<Caption>Selecting the project from the ZEIT Dashboard.</Caption>

### Step 2: Navigating to Domain Settings

Once you have selected the project of your choice, click on the **Domains** item in the menubar:

<Image
  src={`${process.env.ASSETS}/docs/custom-domains/select-domains.png`}
  width={728 / 2}
  height={274 / 2}
  shadow
/>
<Caption>Selecting the <b>Domains</b> tab from the Project Overview page.</Caption>

### Step 3: Entering Your Chosen Domain

From the **Project Domains** page, enter the domain you wish to add to the project:

<Image
  src={`${process.env.ASSETS}/docs/custom-domains/enter-domain.png`}
  width={1483 / 2}
  height={506 / 2}
  shadow
/>
<Caption>Entering a domain for the project from the Project Domains page.</Caption>

### Step 4: Verifying the Domain

Once the domain has added, you will be presented with two methods for verifying it, either through **Nameservers** or **CNAME**.

<Image
  src={`${process.env.ASSETS}/docs/custom-domains/verify-domain.png`}
  width={1400 / 2}
  height={902 / 2}
  shadow
/>
<Caption>Instructions on verifying the domain from the Project Domains page.</Caption>

### Step 5: Domain Verified

Once the domain has been verified, the card status will change to reflect this.

<Image
  src={`${process.env.ASSETS}/docs/custom-domains/verified-domain.png`}
  width={1400 / 2}
  height={234 / 2}
  shadow
/>
<Caption>A verified domain on the Project Domains page.</Caption>

## Wildcard Domains

You can use your custom domain as a Wildcard Domain by prefixing it with `*.`.

<Note type="warning">
  If using your custom domain as a Wildcard Domain, you{' '}
  <b>must use the nameservers method for verification</b>.
</Note>

To add a Wildcard Domain, follow the steps to [add a domain](#step-1:-selecting-your-project), the only change being; at [step 3](#step-3:-entering-your-chosen-domain), where you should instead use the prefix mentioned above, for example; `*.acme.com`.

<Image
  src={`${process.env.ASSETS}/docs/custom-domains/wildcard-domains.png`}
  width={1400 / 2}
  height={836 / 2}
  shadow
/>
<Caption>A <b>Wildcard Domain</b> awaiting verification.</Caption>

After the verification process is complete, the status of the domain will be updated within the UI to confirm that it is ready for use.

## Deploying with Your Domain

Once the domain has been added to your project and verified, it is **automatically applied to your latest deployment**.

If you want to update your production deployment, there are two options available, [using Now CLI](#using-now-cli) or [with Git](#with-git).

<Note>
  The first successful deployment of a new project will be marked as production
  and subsequently assigned with your custom domain automatically if you have
  not used one of the following methods.
</Note>

### Using Now CLI

To update your production deployment, you can use the `--prod` argument with the [`now` command](/docs/now-cli/#commands/now) in your terminal:

<Snippet dark text="now --prod" />
<Caption>Deploying a project to production.</Caption>

### With Git

When a custom domain is assigned as a production domain to a project with a [Now for Git integration](/docs/v2/git-integration) enabled, each push (including merges) to the default branch (commonly `master`) will trigger a deployment that targets the defined domain.

Reverts take effect immediately, assigning the custom domain to the deployment made prior to the point the revert is effective from.

## Removing a Domain

To remove a domain that is assigned to your ZEIT account or team, navigate to the **Domains** tab from the Project Overview and click the **Remove** button for the domain you want to remove:

<Image
  src={`${process.env.ASSETS}/docs/custom-domains/verified-domain.png`}
  width={1400 / 2}
  height={234 / 2}
  shadow
/>
<Caption>A verified domain on the Project Domains page with the option to remove.</Caption>

## Related

For more information on what to do next, we recommend the following article:

<Card
  title="Serverless Functions"
  href="/docs/v2/serverless-functions/introduction"
>
  Extend the capabilities of your project by adding Serverless Functions to it.
</Card>

export default ({ children }) => <Doc meta={meta}>{children}</Doc>

export const config = {
  amp: 'hybrid'
}
